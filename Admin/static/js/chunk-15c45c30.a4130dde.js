(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15c45c30"],{"27ac":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 电影管理\n                ")])],1)],1),n("div",{staticClass:"container"},[n("div",{staticClass:"handle-box"},[n("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.handleAdd}},[e._v("添加")]),n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.query.state,callback:function(t){e.$set(e.query,"state",e._n(t))},expression:"query.state"}},e._l(e.GoodsStateAll,(function(e){return n("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),n("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"商品名称"},model:{value:e.query.goodsName,callback:function(t){e.$set(e.query,"goodsName",t)},expression:"query.goodsName"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),n("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"}},[n("el-table-column",{attrs:{prop:"Id",label:"ID",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"Seq",label:"序号",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"GoodsName",label:"商品名称"}}),n("el-table-column",{attrs:{label:"商品价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Price))]}}])}),n("el-table-column",{attrs:{label:"兑换积分"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Point))]}}])}),n("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("GoodsStateName")(t.row.State)))]}}])}),n("el-table-column",{attrs:{label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),n("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),n("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"90%"},on:{"update:visible":function(t){e.editVisible=t}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"商品名称",prop:"GoodsName"}},[n("el-input",{model:{value:e.form.GoodsName,callback:function(t){e.$set(e.form,"GoodsName",t)},expression:"form.GoodsName"}})],1),n("el-form-item",{attrs:{label:"状态",prop:"State"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.State,callback:function(t){e.$set(e.form,"State",e._n(t))},expression:"form.State"}},e._l(e.GoodsStates,(function(e){return n("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"序号"}},[n("el-input-number",{staticClass:"loose-input",attrs:{step:1,min:0},model:{value:e.form.Seq,callback:function(t){e.$set(e.form,"Seq",t)},expression:"form.Seq"}})],1),n("el-form-item",{attrs:{label:"商品价格"}},[n("el-input-number",{staticClass:"loose-input",attrs:{precision:2,step:.01,min:0},model:{value:e.form.Price,callback:function(t){e.$set(e.form,"Price",t)},expression:"form.Price"}})],1),n("el-form-item",{attrs:{label:"兑换积分"}},[n("el-input-number",{staticClass:"loose-input",attrs:{step:1,min:0},model:{value:e.form.Point,callback:function(t){e.$set(e.form,"Point",t)},expression:"form.Point"}})],1),n("el-form-item",{attrs:{label:"数量"}},[n("el-input-number",{staticClass:"loose-input",attrs:{step:1,min:0},model:{value:e.form.GoodsCount,callback:function(t){e.$set(e.form,"GoodsCount",t)},expression:"form.GoodsCount"}})],1),n("el-form-item",{attrs:{label:"售出数量"}},[n("el-input-number",{staticClass:"loose-input",attrs:{step:1,min:0},model:{value:e.form.QuantitySold,callback:function(t){e.$set(e.form,"QuantitySold",t)},expression:"form.QuantitySold"}})],1),n("el-divider"),n("el-form-item",{attrs:{label:"商品标题"}},[n("el-input",{model:{value:e.form.Title,callback:function(t){e.$set(e.form,"Title",t)},expression:"form.Title"}})],1),n("el-form-item",{attrs:{label:"摘要"}},[n("div",[n("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea"},model:{value:e.form.Summary,callback:function(t){e.$set(e.form,"Summary",t)},expression:"form.Summary"}})],1)]),n("el-form-item",{attrs:{label:"商品图片",prop:"UpdatedUrl"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","auto-upload":!1,"on-change":e.handleChangeGoodsPicUrl,"show-file-list":!1}},[e.form.GoodsPicUrl?n("img",{staticClass:"avatar",attrs:{src:e.form.GoodsPicUrl}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e.form.GoodsPicUrl?n("button",{on:{click:function(t){return e.delGoodsPicUrl()}}},[e._v("删除")]):e._e()],1),n("el-divider"),n("el-form-item",{attrs:{label:"内容"}},[n("tinymce",{ref:"editor",attrs:{inivalue:e.CCCCC,height:300},model:{value:e.form.Content,callback:function(t){e.$set(e.form,"Content",t)},expression:"form.Content"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},o=[],a=n("751a"),l=n("8256"),s={name:"GoodsList",data:function(){return{defaultSrc:n("7159"),fileList:[],imgSrc:"",cropImg:"",dialogVisible:!1,GoodsStateAll:[{name:"全部",value:0},{name:"准备",value:1},{name:"上架",value:2},{name:"下架",value:3}],GoodsStates:[{name:"准备",value:1},{name:"上架",value:2},{name:"下架",value:3}],query:{state:0,goodsName:"",pageIndex:1,pageSize:10},rules:{},CCCCC:"",tableData:[],multipleSelection:[],delList:[],editVisible:!1,pageTotal:0,form:{Content:""},idx:-1,id:-1,GoodsPicUrlFile:{}}},created:function(){this.getData()},mounted:function(){},beforeDestroy:function(){},components:{Tinymce:l["a"]},methods:{delGoodsPicUrl:function(){this.form.GoodsPicUrl="",this.GoodsPicUrlFile=""},handleChangeGoodsPicUrl:function(e,t){this.form.GoodsPicUrl=URL.createObjectURL(e.raw),this.GoodsPicUrlFile=e.raw,console.log("handleChangeGoodsPicUrl A")},getData:function(){var e=this;Object(a["a"])({url:"filmbll/getgoodslist",method:"post",data:this.query}).then((function(t){200==t.code&&(e.tableData=t.obj.ListData,e.pageTotal=t.obj.PageTotal)}))},handleSearch:function(){this.$set(this.query,"pageIndex",1),this.getData()},handleDelete:function(e,t){var n=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){var i={id:t.Id};Object(a["a"])({url:"filmbll/delgoodsinfo",method:"post",data:i}).then((function(t){console.log(t),200==t.code?(n.$message.success("删除成功"),n.tableData.splice(e,1),n.getData()):n.$message.error("删除失败："+t.msg)}))})).catch((function(){}))},handleEdit:function(e,t){var n=this,i={id:t.Id};Object(a["a"])({url:"filmbll/getgoodsdetail",method:"post",data:i}).then((function(t){console.log(t),200==t.code?(n.idx=e,n.form=t.obj,n.CCCCC=t.obj.Content,n.editVisible=!0):n.$message.error("数据变动，无法编辑："+t.msg)}))},handleAdd:function(){this.idx=-1;var e={Id:0,GoodsName:"",State:1,GoodsPicUrl:"",Point:1,Price:1,Title:"",Summary:"",Content:"0",Seq:0,GoodsCount:1,QuantitySold:0};this.form=e,this.editVisible=!0},saveEdit:function(){var e=this;this.form.GoodsPicUrlFile=this.GoodsPicUrlFile,-1===this.idx?(this.form.id=0,Object(a["a"])({url:"filmbll/addgoodsinfo",method:"file",data:this.form}).then((function(t){console.log(t),200==t.code?(e.editVisible=!1,e.$message.success("添加成功"),e.getData()):e.$message.error("添加失败："+t.msg)}))):Object(a["a"])({url:"filmbll/updategoods",method:"file",data:this.form}).then((function(t){console.log(t),200==t.code?(e.editVisible=!1,e.$message.success("修改第 ".concat(e.idx+1," 行成功")),e.$set(e.tableData,e.idx,e.form)):e.$message.error("更新失败："+t.msg)}))},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData()}}},r=s,c=(n("6d66"),n("2877")),u=Object(c["a"])(r,i,o,!1,null,"43f6e88b",null);t["default"]=u.exports},"3a75":function(e,t,n){},5278:function(e,t,n){"use strict";var i=n("3a75"),o=n.n(i);o.a},"6af4":function(e,t,n){},"6d66":function(e,t,n){"use strict";var i=n("6af4"),o=n.n(i);o.a},7159:function(e,t,n){e.exports=n.p+"static/img/img.146655c9.jpg"},8256:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[n("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),n("div",{staticClass:"editor-custom-btn-container"},[n("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:e.imageSuccessCBK}})],1)])},o=[],a=(n("ac6a"),n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n    upload\n  ")]),n("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("\n        Click upload\n      ")])],1),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n      Cancel\n    ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n      Confirm\n    ")])],1)],1)}),l=[],s=(n("456d"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(e,t){for(var n=t.uid,i=Object.keys(this.listObj),o=0,a=i.length;o<a;o++)if(this.listObj[i[o]].uid===n)return this.listObj[i[o]].url=e.files.file,void(this.listObj[i[o]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,n=Object.keys(this.listObj),i=0,o=n.length;i<o;i++)if(this.listObj[n[i]].uid===t)return void delete this.listObj[n[i]]},beforeUpload:function(e){var t=this,n=window.URL||window.webkitURL,i=e.uid;return this.listObj[i]={},new Promise((function(o,a){var l=new Image;l.src=n.createObjectURL(e),l.onload=function(){t.listObj[i]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},o(!0)}))}}}),r=s,c=(n("5278"),n("2877")),u=Object(c["a"])(r,a,l,!1,null,"3dae379b",null),d=u.exports,m=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],f=m,h=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],p=h;n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54");function b(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=g(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}function g(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var y=[];function C(){return window.tinymce}var w=function(e,t){var n=document.getElementById(e),i=t||function(){};if(!n){var o=document.createElement("script");o.src=e,o.id=e,document.body.appendChild(o),y.push(i);var a="onload"in o?l:s;a(o)}function l(t){t.onload=function(){this.onerror=this.onload=null;var e,n=b(y);try{for(n.s();!(e=n.n()).done;){var i=e.value;i(null,t)}}catch(o){n.e(o)}finally{n.f()}y=null},t.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+e),t)}}function s(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,n=b(y);try{for(n.s();!(t=n.n()).done;){var i=t.value;i(null,e)}}catch(o){n.e(o)}finally{n.f()}y=null}}}n&&i&&(C()?i(null,n):y.push(i))},S=w,_="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",k={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},inivalue:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))},inivalue:function(e){window.tinymce.get(this.tinymceId).setContent(e||"")}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;S(_,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:p,menubar:this.menubar,plugins:f,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){t.value&&n.setContent(t.value),t.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",n.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))},convert_urls:!1,images_upload_handler:function(e,t,n,i){var o="data:image/jpeg;base64,"+e.base64();t(o)}})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach((function(e){window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'.concat(e.url,'" >'))}))}}},x=k,j=(n("d698"),Object(c["a"])(x,i,o,!1,null,"755949c2",null));t["a"]=j.exports},cef9:function(e,t,n){},d698:function(e,t,n){"use strict";var i=n("cef9"),o=n.n(i);o.a}}]);
//# sourceMappingURL=chunk-15c45c30.a4130dde.js.map